<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener</title>
</head>
<body>
    <h1>URL Shortener</h1>

    <!-- Input field for long URL -->
    <input type="url" id="url" placeholder="Enter Long URL" required>

    <!-- Input field for custom shortcode (optional) -->
    <input type="text" id="customCode" placeholder="Custom Shortcode (Optional)">

    <!-- Button to generate the short URL -->
    <button onclick="shortenURL()">Shorten</button>

    <!-- Display the shortened URL -->
    <p id="shortenedURL"></p>

    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.5.0/firebase-firestore.js"></script>
    <script>
        // Replace with your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC0JgeX4wDWFjwn4nlZSSR5YXas96tQPzI",
            authDomain: "minizr.firebaseapp.com",
            databaseURL: "https://minizr-default-rtdb.firebaseio.com",
            projectId: "minizr",
            storageBucket: "minizr.appspot.com",
            messagingSenderId: "913821958493",
            appId: "1:913821958493:web:004a65cdbc675f5958a8b4",
            measurementId: "G-39S1CYDCRL"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Function to shorten a URL
        async function shortenURL() {
            const url = document.getElementById("url").value;
            const customCode = document.getElementById("customCode").value;

            // Generate a unique shortcode if not provided
            const shortcode = customCode || generateUniqueShortcode();

            // Save the URL in Firestore
            await db.collection("urls").doc(shortcode).set({
                url: url
            });

            // Display the shortened URL
            const shortenedURL = window.location.href + shortcode;
            document.getElementById("shortenedURL").innerHTML = `<a href="${shortenedURL}" target="_blank">${shortenedURL}</a>`;
        }

        // Function to generate a unique 5-character shortcode
        function generateUniqueShortcode() {
            const length = 5;
            const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let randomCode = '';
            for (let i = 0; i < length; i++) {
                const randomIndex = Math.floor(Math.random() * characters.length);
                randomCode += characters.charAt(randomIndex);
            }

            return randomCode;
        }
    </script>
</body>
</html>
